import{r as t,g as A,c as M,o as E,a,w as n,l as k,m as q,q as j,j as Q,Q as F,s as L,F as D,f as O,i as R,b as H,t as J,k as K,x as W}from"./index-DhVY4AOr.js";import{Q as X,a as P}from"./QTabs-qtIIcNk0.js";import{Q as Y,a as S}from"./QTabPanels-BP3LM9Fb.js";import{Q as Z}from"./QPage-C9SVU1xd.js";import{u as h,Q as ee,b as G,a as U}from"./notifyHooks-DTCs8dSN.js";import{a as ae,_ as le,P as oe}from"./PopupComponent-BMoTzUKP.js";import{Q as te}from"./QExpansionItem-BpTg90Cf.js";import{Q as ne}from"./QForm-mmGRrtT6.js";import{_ as B,a as z}from"./selectComponent-DZrnU1wb.js";import{_ as w}from"./textareaComponent-BbQtPJaR.js";import{u as se,M as ie}from"./MarcaComponent-ecnZNJUU.js";import{_ as ue}from"./imageComponent-G_iIqQmX.js";import{u as re}from"./vue-i18n.runtime-mEmbPDrt.js";import"./use-panel-CdId_k0j.js";import"./touch-BjYP5sR0.js";import"./use-quasar-2VkCt5Th.js";import"./use-render-cache-7gfEi9oV.js";import"./QSlideTransition-DTNjs9-t.js";import"./QToolbar-DOtoYezo.js";const de={class:"row full-width items-center"},ce={class:"col-auto"},me={class:"col text-right"},pe={__name:"unidadFormComponent",props:{parent:{type:Number,required:!0,default:null},parent_action:{type:String,required:!0,default:""}},setup(I){const{successNotify:V,errorNotify:p}=h(),v=t(!1),y=t("unidades"),i=t("unidades"),c=I,u=t(null);u.value=c.parent,c.parent_action&&(i.value=c.parent_action);const m=t(""),x=t(null),r=t(null),f=t(null),d=t(""),_=t(""),s=t(""),g=t(""),b=t(""),C=async()=>{if(c.parent_action=="update")try{if(!u.value)return p("No existe el identificador"),!1;const l=await U(y.value).getById(u.value),e=l.data;m.value=e.name,x.value=e.id_marca,r.value=e.id_tipo_prenda,f.value=e.id_genero,d.value=e.version,_.value=e.descripcion_es,s.value=e.descripcion_en,g.value=e.descripcion_pt,b.value=e.descripcion_fr,i.value="update",console.log("Success...",l)}catch(l){console.log("Error...",l),p(l.message)}else $()},N=async()=>{const l={name:m.value,id_marca:x.value,id_tipo_prenda:r.value,id_genero:f.value,version:d.value,descripcion_es:_.value,descripcion_en:s.value,descripcion_pt:g.value,descripcion_fr:b.value};if(i.value=="update"){u.value||p("No existe el identificador");try{const e=await U(`${y.value}/${u.value}`).update(l);V(e.message)}catch(e){p(e.message)}}else if(i.value=="insert")try{const e=await U(y.value).post(l);console.log(e),V(e.message),i.value="update",u.value=e.data.id}catch(e){p(e.message)}else p("Ninguna acción seleccionada!")},$=async()=>{m.value="",x.value=null,r.value=null,f.value=null,d.value="",_.value="",s.value="",g.value="",b.value=""};return A(()=>{C()}),(l,e)=>(E(),M(D,null,[a(ne,{onSubmit:N},{default:n(()=>[a(k,{class:"q-pb-sm"},{default:n(()=>[a(q,null,{default:n(()=>[a(k,null,{default:n(()=>[a(q,{class:"row q-col-gutter-x-lg"},{default:n(()=>[a(B,{label:"Nombre",modelValue:m.value,"onUpdate:modelValue":e[0]||(e[0]=o=>m.value=o),field:"name",rules:"max:50|required"},null,8,["modelValue"]),a(z,{label:"Tipo",modelValue:r.value,"onUpdate:modelValue":e[1]||(e[1]=o=>r.value=o),field:"id_tipo_prenda",rules:"integer|required",api:"tipo_prendas"},null,8,["modelValue"]),a(B,{label:"Versión",modelValue:d.value,"onUpdate:modelValue":e[2]||(e[2]=o=>d.value=o),field:"version",rules:"integer|max:50"},null,8,["modelValue"]),a(z,{label:"Género",modelValue:f.value,"onUpdate:modelValue":e[3]||(e[3]=o=>f.value=o),field:"id_genero",rules:"integer",api:"generos",class:"col-md-6 col-lg-6"},null,8,["modelValue"])]),_:1})]),_:1}),a(te,{dense:"","expand-separator":"","default-opened":"",label:"Descripción",icon:"las la-file-alt",class:"text-grey-9 q-mt-lg"},{default:n(()=>[a(k,null,{default:n(()=>[a(q,{class:"row q-col-gutter-x-lg"},{default:n(()=>[a(w,{label:"Español",modelValue:_.value,"onUpdate:modelValue":e[4]||(e[4]=o=>_.value=o),field:"descripcion_es",rules:"max:700",class:"col-md-6 col-lg-6"},null,8,["modelValue"]),a(w,{label:"English",modelValue:s.value,"onUpdate:modelValue":e[5]||(e[5]=o=>s.value=o),field:"descripcion_en",rules:"max:700",class:"col-md-6 col-lg-6"},null,8,["modelValue"]),a(w,{label:"Português",modelValue:g.value,"onUpdate:modelValue":e[6]||(e[6]=o=>g.value=o),field:"descripcion_pt",rules:"max:700",class:"col-md-6 col-lg-6"},null,8,["modelValue"]),a(w,{label:"Français",modelValue:b.value,"onUpdate:modelValue":e[7]||(e[7]=o=>b.value=o),field:"descripcion_fr",rules:"max:700",class:"col-md-6 col-lg-6"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),a(j,{class:"q-pt-md"},{default:n(()=>[Q("div",de,[e[10]||(e[10]=Q("div",{class:"col"},null,-1)),Q("div",ce,[a(F,{label:"Guardar",type:"submit",color:"positive",icon:"las la-save",dense:"",outline:""})]),Q("div",me,[a(F,{label:"",color:"negative",icon:"las la-trash-alt",dense:"",flat:"",onClick:e[8]||(e[8]=o=>l.eliminar())},{default:n(()=>[a(ee,{class:"bg-red",offset:[10,10],"transition-show":"scale","transition-hide":"scale"},{default:n(()=>e[9]||(e[9]=[L("Eliminar")])),_:1,__:[9]})]),_:1})])])]),_:1})]),_:1})]),_:1}),a(G,{showing:v.value,label:"Cargando...","label-class":"text-teal",color:"blue","label-style":"font-size: 1.1em"},null,8,["showing"])],64))}},fe=["onClick"],ve={__name:"UnidadPage",setup(I){const{errorNotify:V}=h(),{t:p}=re(),v=t(!1),y=U("unidades"),i=t("insert"),c=t(!1),u=t(null),m=t("las la-plus-circle"),x=se(),r=t(x.id_marca),f=t([]),d={},_=t([{label:"las la-photo",name:"foto",slot:"foto",align:"center",sortable:!1,hidden:!0},{label:"Nombre",name:"name",link:"id"},{label:"Tipo",name:"tipo",link:"id"},{label:"Version",name:"version"},{label:"Código",name:"codigo",align:"center"}]),s=async()=>{try{v.value=!0,d.id_marca=r.value||null;const l=await y.list(d);f.value=l.data}catch(l){console.log("Error...",l),V(l.message)}finally{v.value=!1}},g=l=>{d.search=l.search.trim()??"",s()},b=t({button_action_style:"dropdown",button_add:!0,button_edit:!0,button_delete:!1,button_detail:!0,hidden_pagination:!1,button_reset:!1,button_cancel:!1,button_pagination_custom:!0}),C=async l=>{i.value=l.action_type,u.value=l.actionId,m.value="las la-edit",await s()},N=async()=>{i.value="insert",m.value="las la-plus-circle",c.value=!0},$=async l=>{try{if(v.value=!0,!l)return V("No existe el identificador"),!1;u.value=l,c.value=!0,i.value="update",m.value="las la-edit"}catch(e){console.log("Error...",e),await s(),V(e.message)}finally{v.value=!1}};return O(r,l=>{d.id_marca=l||null,s()}),A(()=>{s()}),(l,e)=>(E(),M(D,null,[a(Z,{class:"q-pa-md"},{default:n(()=>[a(ie,{modelValue:r.value,"onUpdate:modelValue":e[0]||(e[0]=o=>r.value=o)},null,8,["modelValue"]),a(le,{title:"",columns:_.value,rows:f.value,default_action:b.value,onSearch:g},{header:n(()=>[a(F,{label:K(p)("button.add"),icon:"las la-plus-circle",color:"green",dense:"",outline:"",onClick:e[1]||(e[1]=o=>N())},null,8,["label"])]),id:n(({row:o})=>[Q("a",{onClick:T=>$(o.id),class:"link_animate cursor-pointer"},J(o.name),9,fe)]),foto:n(({row:o})=>[a(ue,{modelValue:o.foto,"onUpdate:modelValue":T=>o.foto=T,size:"20px"},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["columns","rows","default_action"]),c.value?(E(),R(oe,{key:0,title:"Unidad",action:l.actionPopup,onClose:e[4]||(e[4]=o=>c.value=!1),size:"lg",maximized:!1},{default:n(()=>[a(X,{modelValue:l.tab,"onUpdate:modelValue":e[2]||(e[2]=o=>l.tab=o),dense:"",class:"text-grey","active-color":"primary",align:"left"},{default:n(()=>[a(P,{name:"unidad",label:"Unidad"}),a(P,{name:"ficha_tecnica",label:"Ficha ténica"}),a(P,{name:"fases",label:"Fases"})]),_:1},8,["modelValue"]),a(W),a(Y,{modelValue:l.tab,"onUpdate:modelValue":e[3]||(e[3]=o=>l.tab=o),animated:""},{default:n(()=>[a(S,{name:"unidad"},{default:n(()=>[a(pe,{parent:u.value,parent_action:i.value,onFormAction:C},null,8,["parent","parent_action"])]),_:1}),a(S,{name:"ficha_tecnica"}),a(S,{name:"fases"})]),_:1},8,["modelValue"])]),_:1},8,["action"])):H("",!0)]),_:1}),a(G,{showing:v.value,label:"Cargando...","label-class":"text-teal",color:"blue","label-style":"font-size: 1.1em"},null,8,["showing"])],64))}},Te=ae(ve,[["__scopeId","data-v-36aad0f2"]]);export{Te as default};
