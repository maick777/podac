import{Q as j,a as S}from"./QTabs-qtIIcNk0.js";import{r as l,g as z,c as G,o as B,a,w as t,l as $,m as I,q as L,j as w,Q as E,s as M,F as O,v as H,i as A,b as J,t as K,x as W}from"./index-DhVY4AOr.js";import{Q as X,a as P}from"./QTabPanels-BP3LM9Fb.js";import{Q as Y}from"./QPage-C9SVU1xd.js";import{a as Z,_ as ee,P as ae}from"./PopupComponent-BMoTzUKP.js";import{Q as le}from"./QExpansionItem-BpTg90Cf.js";import{u as D,Q as oe,b as te,a as N}from"./notifyHooks-DTCs8dSN.js";import{Q as ne}from"./QForm-mmGRrtT6.js";import{_ as x,a as se}from"./selectComponent-DZrnU1wb.js";import{_ as ue}from"./textareaComponent-BbQtPJaR.js";import"./use-panel-CdId_k0j.js";import"./touch-BjYP5sR0.js";import"./use-quasar-2VkCt5Th.js";import"./use-render-cache-7gfEi9oV.js";import"./vue-i18n.runtime-mEmbPDrt.js";import"./QSlideTransition-DTNjs9-t.js";const re={class:"row full-width items-center"},ie={class:"col-auto"},de={class:"col text-right"},me={__name:"ClienteInformacionComponent",props:{parent:{type:Number,required:!0,default:null},parent_action:{type:String,required:!0,default:""}},setup(T){const{successNotify:g,errorNotify:i}=D(),k=l(!1),V=l("clientes"),f=l("clientes"),y=T,d=l(null);d.value=y.parent,y.parent_action&&(f.value=y.parent_action);const Q=l(""),v=l(""),m=l(""),_=l(""),c=l(""),C=l(null),o=l(null),u=l(""),b=l(""),n=l(""),p=l(""),q=l(""),U=l(""),F=async()=>{if(y.parent_action=="update")try{if(!d.value)return i("No existe el identificador"),!1;const r=await N(V.value).getById(d.value),e=r.data;Q.value=e.codigo,v.value=e.primer_nombre,m.value=e.segundo_nombre,_.value=e.apellido_paterno,c.value=e.apellido_materno,C.value=e.fecha_nacimiento,o.value=e.id_genero,u.value=e.titulo,b.value=e.telefono,n.value=e.celular,p.value=e.correo,q.value=e.web,U.value=e.facebook,f.value="update",console.log("Success...",r)}catch(r){console.log("Error...",r),i(r.message)}else R()},h=async()=>{const r={codigo:Q.value,primer_nombre:v.value,segundo_nombre:m.value,apellido_paterno:_.value,apellido_materno:c.value,fecha_nacimiento:C.value,id_genero:o.value,titulo:u.value,telefono:b.value,celular:n.value,correo:p.value,web:q.value,facebook:U.value};if(f.value=="update"){d.value||i("No existe el identificador");try{const e=await N(`${V.value}/${d.value}`).update(r);g(e.message)}catch(e){i(e.message)}}else if(f.value=="insert")try{const e=await N(V.value).post(r);console.log(e),g(e.message),f.value="update",d.value=e.data.id}catch(e){i(e.message)}else i("Ninguna acción seleccionada!")},R=async()=>{Q.value="",v.value="",m.value="",_.value="",c.value="",C.value=null,o.value=null,u.value="",b.value="",n.value="",p.value="",q.value="",U.value=""};return z(()=>{F()}),(r,e)=>(B(),G(O,null,[a(ne,{onSubmit:h},{default:t(()=>[a($,{class:"q-pb-sm"},{default:t(()=>[a(I,null,{default:t(()=>[a($,null,{default:t(()=>[a(I,{class:"row q-col-gutter-x-lg"},{default:t(()=>[a(x,{label:"Primer nombre",modelValue:v.value,"onUpdate:modelValue":e[0]||(e[0]=s=>v.value=s),field:"primer_nombre",rules:"max:50|required"},null,8,["modelValue"]),a(x,{label:"Segundo nombre",modelValue:m.value,"onUpdate:modelValue":e[1]||(e[1]=s=>m.value=s),field:"segundo_nombre",rules:"max:50"},null,8,["modelValue"]),a(x,{label:"Apellido paterno",modelValue:_.value,"onUpdate:modelValue":e[2]||(e[2]=s=>_.value=s),field:"apellido_paterno",rules:"integer|required|max:50"},null,8,["modelValue"]),a(x,{label:"Apellido materno",modelValue:c.value,"onUpdate:modelValue":e[3]||(e[3]=s=>c.value=s),field:"apellido_materno",rules:"max:50"},null,8,["modelValue"]),a(se,{label:"Sexo",modelValue:o.value,"onUpdate:modelValue":e[4]||(e[4]=s=>o.value=s),field:"id_genero",rules:"integer|required",api:"generos"},null,8,["modelValue"])]),_:1})]),_:1}),a(le,{dense:"","expand-separator":"","default-opened":"",label:"Contacto",icon:"las la-phone-volume",class:"text-grey-9 q-mt-lg"},{default:t(()=>[a($,null,{default:t(()=>[a(I,{class:"row q-col-gutter-x-lg"},{default:t(()=>[a(x,{label:"Correo",modelValue:p.value,"onUpdate:modelValue":e[5]||(e[5]=s=>p.value=s),field:"correo",rules:"max:50"},null,8,["modelValue"]),a(x,{label:"Teléfono",modelValue:b.value,"onUpdate:modelValue":e[6]||(e[6]=s=>b.value=s),field:"telefono",rules:"max:50"},null,8,["modelValue"]),a(ue,{label:"Celular",modelValue:n.value,"onUpdate:modelValue":e[7]||(e[7]=s=>n.value=s),field:"celular",rules:"max:700",class:"col-md-6 col-lg-6"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),a(L,{class:"q-pt-md"},{default:t(()=>[w("div",re,[e[10]||(e[10]=w("div",{class:"col"},null,-1)),w("div",ie,[a(E,{label:"Guardar",type:"submit",color:"positive",icon:"las la-save",dense:"",outline:""})]),w("div",de,[a(E,{label:"",color:"negative",icon:"las la-trash-alt",dense:"",flat:"",onClick:e[8]||(e[8]=s=>r.eliminar())},{default:t(()=>[a(oe,{class:"bg-red",offset:[10,10],"transition-show":"scale","transition-hide":"scale"},{default:t(()=>e[9]||(e[9]=[M("Eliminar")])),_:1,__:[9]})]),_:1})])])]),_:1})]),_:1})]),_:1}),a(te,{showing:k.value,label:"Cargando...","label-class":"text-teal",color:"blue","label-style":"font-size: 1.1em"},null,8,["showing"])],64))}},ce=["onClick"],pe={__name:"ClientePage",setup(T){const{errorNotify:g}=D(),i=l(!1),k=N("clientes"),V=l([]),f={},y=l([{label:"",name:"foto",slot:"foto",align:"center",sortable:!1,hidden:!0},{label:"Nombre",name:"name",link:"id"},{label:"Celular",name:"celular"},{label:"Teléfono",name:"telefono"},{label:"Código",name:"codigo",align:"center"}]),d=async()=>{try{i.value=!0;const o=await k.list(f);V.value=o.data}catch(o){console.log("Error...",o),g(o.message)}finally{i.value=!1}},Q=l({button_action_style:"dropdown",button_add:!0,button_edit:!0,button_delete:!1,button_detail:!0,hidden_pagination:!1,button_reset:!1,button_cancel:!1,button_pagination_custom:!0}),v=async o=>{try{if(!o)return g("No existe el identificador"),!1;m.value=!0,c.value=o,C.value="update"}catch(u){console.log("Error...",u),d(),g(u.message)}},m=l(!1),_=l(""),c=l(null),C=l("insert");return z(()=>{d()}),(o,u)=>{const b=H("ImageComponent");return B(),A(Y,{class:"q-pa-md"},{default:t(()=>[a(ee,{title:"",columns:y.value,rows:V.value,default_action:Q.value,onBtn_action:o.btnAcion,onSearch:o.search},{header:t(()=>u[3]||(u[3]=[])),id:t(({row:n})=>[w("a",{onClick:p=>v(n.id),class:"link_animate cursor-pointer"},K(n.name),9,ce)]),foto:t(({row:n})=>[a(b,{modelValue:n.foto,"onUpdate:modelValue":p=>n.foto=p,size:"20px"},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["columns","rows","default_action","onBtn_action","onSearch"]),m.value?(B(),A(ae,{key:0,title:"Cliente",action:_.value,onClose:u[2]||(u[2]=n=>m.value=!1),size:"lg",maximized:!1},{default:t(()=>[a(j,{modelValue:o.tab,"onUpdate:modelValue":u[0]||(u[0]=n=>o.tab=n),dense:"",class:"text-grey","active-color":"primary",align:"left"},{default:t(()=>[a(S,{name:"unidad",label:"Información"}),a(S,{name:"ficha_tecnica",label:"Compras"}),a(S,{name:"fases",label:"Regalos"})]),_:1},8,["modelValue"]),a(W),a(X,{modelValue:o.tab,"onUpdate:modelValue":u[1]||(u[1]=n=>o.tab=n),animated:""},{default:t(()=>[a(P,{name:"unidad"},{default:t(()=>[a(me,{parent:c.value,parent_action:C.value},null,8,["parent","parent_action"])]),_:1}),a(P,{name:"ficha_tecnica"}),a(P,{name:"fases"})]),_:1},8,["modelValue"])]),_:1},8,["action"])):J("",!0)]),_:1})}}},$e=Z(pe,[["__scopeId","data-v-8c2458c6"]]);export{$e as default};
